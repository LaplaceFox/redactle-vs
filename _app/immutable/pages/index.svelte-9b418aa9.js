import{S as ve,i as we,s as be,e as L,t as D,c as O,a as N,h as H,d as w,b as P,K,g as z,J as v,j as Q,n as re,l as ie,p as B,q as Y,r as j,L as x,k as F,m as X,M as Ae,N as oe,O as Le,P as Z,Q as Oe,o as $,R as Ge,x as ke,y as ye,z as Ee,C as Te}from"../chunks/index-87fdb8f6.js";function Ne(a){let e,l=(a[2]?"\u2580".repeat(a[0].length):a[0])+"",t,o;return{c(){e=L("span"),t=D(l),this.h()},l(n){e=O(n,"SPAN",{class:!0});var h=N(e);t=H(h,l),h.forEach(w),this.h()},h(){P(e,"class",o=K(a[1]?"highlight":"")+" svelte-1h51goc")},m(n,h){z(n,e,h),v(e,t)},p(n,[h]){h&5&&l!==(l=(n[2]?"\u2580".repeat(n[0].length):n[0])+"")&&Q(t,l),h&2&&o!==(o=K(n[1]?"highlight":"")+" svelte-1h51goc")&&P(e,"class",o)},i:re,o:re,d(n){n&&w(e)}}}function Pe(a,e,l){let{value:t=""}=e,{highlight:o=!1}=e,{redacted:n=!1}=e;return a.$$set=h=>{"value"in h&&l(0,t=h.value),"highlight"in h&&l(1,o=h.highlight),"redacted"in h&&l(2,n=h.redacted)},[t,o,n]}class qe extends ve{constructor(e){super(),we(this,e,Pe,Ne,be,{value:0,highlight:1,redacted:2})}}var Re=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},Se={exports:{}};(function(a){(function(e){if(typeof l!="function"){var l=function(d){return d};l.nonNative=!0}const t=l("plaintext"),o=l("html"),n=l("comment"),h=/<(\w*)>/g,s=/<\/?([^\s\/>]+)/;function i(d,_,k){d=d||"",_=_||[],k=k||"";let C=m(_,k);return q(d,C)}function r(d,_){d=d||[],_=_||"";let k=m(d,_);return function(y){return q(y||"",k)}}i.init_streaming_mode=r;function m(d,_){return d=G(d),{allowable_tags:d,tag_replacement:_,state:t,tag_buffer:"",depth:0,in_quote_char:""}}function q(d,_){if(typeof d!="string")throw new TypeError("'html' parameter must be a string");let k=_.allowable_tags,C=_.tag_replacement,y=_.state,b=_.tag_buffer,W=_.depth,R=_.in_quote_char,f="";for(let p=0,A=d.length;p<A;p++){let c=d[p];if(y===t)switch(c){case"<":y=o,b+=c;break;default:f+=c;break}else if(y===o)switch(c){case"<":if(R)break;W++;break;case">":if(R)break;if(W){W--;break}R="",y=t,b+=">",k.has(S(b))?f+=b:f+=C,b="";break;case'"':case"'":c===R?R="":R=R||c,b+=c;break;case"-":b==="<!-"&&(y=n),b+=c;break;case" ":case`
`:if(b==="<"){y=t,f+="< ",b="";break}b+=c;break;default:b+=c;break}else if(y===n)switch(c){case">":b.slice(-2)=="--"&&(y=t),b="";break;default:b+=c;break}}return _.state=y,_.tag_buffer=b,_.depth=W,_.in_quote_char=R,f}function G(d){let _=new Set;if(typeof d=="string"){let k;for(;k=h.exec(d);)_.add(k[1])}else!l.nonNative&&typeof d[l.iterator]=="function"?_=new Set(d):typeof d.forEach=="function"&&d.forEach(_.add,_);return _}function S(d){let _=s.exec(d);return _?_[1].toLowerCase():null}a.exports?a.exports=i:e.striptags=i})(Re)})(Se);var Ie=Se.exports;function ae(a,e,l){const t=a.slice();return t[22]=e[l],t[24]=l,t}function he(a,e,l){const t=a.slice();return t[25]=e[l],t}function ce(a,e,l){const t=a.slice();return t[28]=e[l],t}function fe(a,e,l){const t=a.slice();return t[28]=e[l],t}function ue(a){let e,l;return{c(){e=L("p"),l=D("loading...")},l(t){e=O(t,"P",{});var o=N(e);l=H(o,"loading..."),o.forEach(w)},m(t,o){z(t,e,o),v(e,l)},d(t){t&&w(e)}}}function de(a){let e,l,t=Object.keys(a[0]).length+"",o,n;return{c(){e=L("p"),l=D("Solved in "),o=D(t),n=D(" guesses!")},l(h){e=O(h,"P",{});var s=N(e);l=H(s,"Solved in "),o=H(s,t),n=H(s," guesses!"),s.forEach(w)},m(h,s){z(h,e,s),v(e,l),v(e,o),v(e,n)},p(h,s){s[0]&1&&t!==(t=Object.keys(h[0]).length+"")&&Q(o,t)},d(h){h&&w(e)}}}function je(a){let e,l,t,o=a[25].tokens,n=[];for(let s=0;s<o.length;s+=1)n[s]=ge(ce(a,o,s));const h=s=>B(n[s],1,1,()=>{n[s]=null});return{c(){e=L("p");for(let s=0;s<n.length;s+=1)n[s].c();l=F(),this.h()},l(s){e=O(s,"P",{class:!0});var i=N(e);for(let r=0;r<n.length;r+=1)n[r].l(i);l=X(i),i.forEach(w),this.h()},h(){P(e,"class","svelte-1e43qac")},m(s,i){z(s,e,i);for(let r=0;r<n.length;r+=1)n[r].m(e,null);v(e,l),t=!0},p(s,i){if(i[0]&4){o=s[25].tokens;let r;for(r=0;r<o.length;r+=1){const m=ce(s,o,r);n[r]?(n[r].p(m,i),j(n[r],1)):(n[r]=ge(m),n[r].c(),j(n[r],1),n[r].m(e,l))}for($(),r=o.length;r<n.length;r+=1)h(r);Y()}},i(s){if(!t){for(let i=0;i<o.length;i+=1)j(n[i]);t=!0}},o(s){n=n.filter(Boolean);for(let i=0;i<n.length;i+=1)B(n[i]);t=!1},d(s){s&&w(e),Z(n,s)}}}function Me(a){let e,l,t,o=a[25].tokens,n=[];for(let s=0;s<o.length;s+=1)n[s]=_e(fe(a,o,s));const h=s=>B(n[s],1,1,()=>{n[s]=null});return{c(){e=L("h2");for(let s=0;s<n.length;s+=1)n[s].c();l=F(),this.h()},l(s){e=O(s,"H2",{class:!0});var i=N(e);for(let r=0;r<n.length;r+=1)n[r].l(i);l=X(i),i.forEach(w),this.h()},h(){P(e,"class","svelte-1e43qac")},m(s,i){z(s,e,i);for(let r=0;r<n.length;r+=1)n[r].m(e,null);v(e,l),t=!0},p(s,i){if(i[0]&4){o=s[25].tokens;let r;for(r=0;r<o.length;r+=1){const m=fe(s,o,r);n[r]?(n[r].p(m,i),j(n[r],1)):(n[r]=_e(m),n[r].c(),j(n[r],1),n[r].m(e,l))}for($(),r=o.length;r<n.length;r+=1)h(r);Y()}},i(s){if(!t){for(let i=0;i<o.length;i+=1)j(n[i]);t=!0}},o(s){n=n.filter(Boolean);for(let i=0;i<n.length;i+=1)B(n[i]);t=!1},d(s){s&&w(e),Z(n,s)}}}function ge(a){let e,l;return e=new qe({props:{value:a[28].value,redacted:a[28].redacted,highlight:a[28].highlight||!1}}),{c(){ke(e.$$.fragment)},l(t){ye(e.$$.fragment,t)},m(t,o){Ee(e,t,o),l=!0},p(t,o){const n={};o[0]&4&&(n.value=t[28].value),o[0]&4&&(n.redacted=t[28].redacted),o[0]&4&&(n.highlight=t[28].highlight||!1),e.$set(n)},i(t){l||(j(e.$$.fragment,t),l=!0)},o(t){B(e.$$.fragment,t),l=!1},d(t){Te(e,t)}}}function _e(a){let e,l;return e=new qe({props:{value:a[28].value,redacted:a[28].redacted,highlight:a[28].highlight||!1}}),{c(){ke(e.$$.fragment)},l(t){ye(e.$$.fragment,t)},m(t,o){Ee(e,t,o),l=!0},p(t,o){const n={};o[0]&4&&(n.value=t[28].value),o[0]&4&&(n.redacted=t[28].redacted),o[0]&4&&(n.highlight=t[28].highlight||!1),e.$set(n)},i(t){l||(j(e.$$.fragment,t),l=!0)},o(t){B(e.$$.fragment,t),l=!1},d(t){Te(e,t)}}}function pe(a){let e,l,t,o;const n=[Me,je],h=[];function s(i,r){return i[25].headline?0:1}return e=s(a),l=h[e]=n[e](a),{c(){l.c(),t=ie()},l(i){l.l(i),t=ie()},m(i,r){h[e].m(i,r),z(i,t,r),o=!0},p(i,r){let m=e;e=s(i),e===m?h[e].p(i,r):($(),B(h[m],1,1,()=>{h[m]=null}),Y(),l=h[e],l?l.p(i,r):(l=h[e]=n[e](i),l.c()),j(l,1),l.m(t.parentNode,t))},i(i){o||(j(l),o=!0)},o(i){B(l),o=!1},d(i){h[e].d(i),i&&w(t)}}}function me(a){let e,l,t=a[22]+"",o,n,h=a[0][a[22]]+"",s,i,r,m,q;return{c(){e=L("span"),l=L("b"),o=D(t),n=D(" ("),s=D(h),i=D(")"),this.h()},l(G){e=O(G,"SPAN",{class:!0});var S=N(e);l=O(S,"B",{});var d=N(l);o=H(d,t),d.forEach(w),n=H(S," ("),s=H(S,h),i=H(S,")"),S.forEach(w),this.h()},h(){P(e,"class",r=K(a[4]==a[22]?"highlight word":"word")+" svelte-1e43qac")},m(G,S){z(G,e,S),v(e,l),v(l,o),v(e,n),v(e,s),v(e,i),m||(q=x(e,"click",function(){Ge(a[6]({word:a[22]}))&&a[6]({word:a[22]}).apply(this,arguments)}),m=!0)},p(G,S){a=G,S[0]&1&&t!==(t=a[22]+"")&&Q(o,t),S[0]&1&&h!==(h=a[0][a[22]]+"")&&Q(s,h),S[0]&17&&r!==(r=K(a[4]==a[22]?"highlight word":"word")+" svelte-1e43qac")&&P(e,"class",r)},d(G){G&&w(e),m=!1,q()}}}function Ce(a){let e,l,t,o,n,h,s,i,r,m,q,G,S,d,_,k,C,y,b,W,R,f=a[5]&&ue(),p=a[1]&&de(a),A=a[2],c=[];for(let g=0;g<A.length;g+=1)c[g]=pe(he(a,A,g));const I=g=>B(c[g],1,1,()=>{c[g]=null});let M=Object.keys(a[0]).reverse(),E=[];for(let g=0;g<M.length;g+=1)E[g]=me(ae(a,M,g));return{c(){e=L("div"),l=L("div"),t=L("h1"),o=D("Redactle"),n=F(),f&&f.c(),h=F(),p&&p.c(),s=F(),i=L("article");for(let g=0;g<c.length;g+=1)c[g].c();r=F(),m=L("div"),q=L("h3"),G=D("Guesses"),S=F(),d=L("div"),_=L("form"),k=L("input"),C=F(),y=L("guess-list");for(let g=0;g<E.length;g+=1)E[g].c();this.h()},l(g){e=O(g,"DIV",{id:!0,class:!0});var T=N(e);l=O(T,"DIV",{id:!0,class:!0});var u=N(l);t=O(u,"H1",{});var V=N(t);o=H(V,"Redactle"),V.forEach(w),n=X(u),f&&f.l(u),h=X(u),p&&p.l(u),s=X(u),i=O(u,"ARTICLE",{class:!0});var ee=N(i);for(let U=0;U<c.length;U+=1)c[U].l(ee);ee.forEach(w),u.forEach(w),r=X(T),m=O(T,"DIV",{id:!0,class:!0});var J=N(m);q=O(J,"H3",{});var te=N(q);G=H(te,"Guesses"),te.forEach(w),S=X(J),d=O(J,"DIV",{id:!0});var le=N(d);_=O(le,"FORM",{});var ne=N(_);k=O(ne,"INPUT",{placeholder:!0}),ne.forEach(w),le.forEach(w),C=X(J),y=O(J,"GUESS-LIST",{class:!0});var se=N(y);for(let U=0;U<E.length;U+=1)E[U].l(se);se.forEach(w),J.forEach(w),T.forEach(w),this.h()},h(){P(i,"class","svelte-1e43qac"),P(l,"id","main"),P(l,"class","svelte-1e43qac"),P(k,"placeholder","guess a word..."),P(d,"id","guess-form"),Ae(y,"class","svelte-1e43qac"),P(m,"id","guesses"),P(m,"class","svelte-1e43qac"),P(e,"id","redactle"),P(e,"class","svelte-1e43qac")},m(g,T){z(g,e,T),v(e,l),v(l,t),v(t,o),v(l,n),f&&f.m(l,null),v(l,h),p&&p.m(l,null),v(l,s),v(l,i);for(let u=0;u<c.length;u+=1)c[u].m(i,null);v(e,r),v(e,m),v(m,q),v(q,G),v(m,S),v(m,d),v(d,_),v(_,k),oe(k,a[3]),v(m,C),v(m,y);for(let u=0;u<E.length;u+=1)E[u].m(y,null);b=!0,W||(R=[x(k,"input",a[8]),x(_,"submit",Le(a[7]))],W=!0)},p(g,T){if(g[5]?f||(f=ue(),f.c(),f.m(l,h)):f&&(f.d(1),f=null),g[1]?p?p.p(g,T):(p=de(g),p.c(),p.m(l,s)):p&&(p.d(1),p=null),T[0]&4){A=g[2];let u;for(u=0;u<A.length;u+=1){const V=he(g,A,u);c[u]?(c[u].p(V,T),j(c[u],1)):(c[u]=pe(V),c[u].c(),j(c[u],1),c[u].m(i,null))}for($(),u=A.length;u<c.length;u+=1)I(u);Y()}if(T[0]&8&&k.value!==g[3]&&oe(k,g[3]),T[0]&81){M=Object.keys(g[0]).reverse();let u;for(u=0;u<M.length;u+=1){const V=ae(g,M,u);E[u]?E[u].p(V,T):(E[u]=me(V),E[u].c(),E[u].m(y,null))}for(;u<E.length;u+=1)E[u].d(1);E.length=M.length}},i(g){if(!b){for(let T=0;T<A.length;T+=1)j(c[T]);b=!0}},o(g){c=c.filter(Boolean);for(let T=0;T<c.length;T+=1)B(c[T]);b=!1},d(g){g&&w(e),f&&f.d(),p&&p.d(),Z(c,g),Z(E,g),W=!1,Oe(R)}}}let De=/(([^\u0000-\u007F]|\w)+)((\W)*)/ig;function He(a,e,l){let t="",o=[],n={},h=!1;const s=["i","me","my","myself","we","our","ours","ourselves","you","you're","you've","you'll","you'd","your","yours","yourself","yourselves","he","him","his","himself","she","she's","her","hers","herself","it","it's","its","itself","they","them","their","theirs","themselves","what","which","who","whom","this","that","that'll","these","those","am","is","are","was","were","be","been","being","have","has","had","having","do","does","did","doing","a","an","the","and","but","if","or","because","as","until","while","of","at","by","for","with","about","against","between","into","through","during","before","after","above","below","to","from","up","down","in","out","on","off","over","under","again","further","then","once","here","there","when","where","why","how","all","any","both","each","few","more","most","other","some","such","no","nor","not","only","own","same","so","than","too","very","s","t","can","will","just","don","don't","should","should've","now","d","ll","m","o","re","ve","y","ain","aren","aren't","couldn","couldn't","didn","didn't","doesn","doesn't","hadn","hadn't","hasn","hasn't","haven","haven't","isn","isn't","ma","mightn","mightn't","mustn","mustn't","needn","needn't","shan","shan't","shouldn","shouldn't","wasn","wasn't","weren","weren't","won","won't","wouldn","wouldn't"];let i={};s.filter(f=>f.length<8).forEach(f=>i[f]=1);let r=[],m="",q="",G=!0;function S(){const f=["Hydrogen","Archery","Galaxy","Fern","Lion","Glacier","Watt"],p=Math.floor(Math.random()*f.length);let A=f[p];fetch(`https://en.wikipedia.org/api/rest_v1/page/mobile-sections/${A}`).then(c=>c.json()).then(c=>{c.lead.displaytitle;let I=c.lead.sections[0].text,M=d(I);t+=d(I),o.push({text:M,headline:c.lead.displaytitle});let E=0;for(;t.length<15e3&&E<c.remaining.sections.length;)I=c.remaining.sections[E].text,M=d(I),t+=d(I),o.push({text:M,headline:c.remaining.sections[E].line}),E++;_()})}function d(f){let p=f.replace(/<style.*>.*<\/style>/ig,"");return p=Ie(p),p=p.replace(/&nbsp;/g," ").replace(/&(?:amp);/g,"&").replace(/&(?:lt);/g,"<").replace(/&(?:gt);/g,">").replace(/&(?:quot);/g,'"').replace(/&(?:#39);/g,"'"),p=p.replace(/\[\d+\]/ig,""),p}S();function _(){console.log("rendering..."),l(2,r=[]);for(const f in o)C(o[f].headline,!0),f==0&&l(1,h=k()),C(o[f].text,!1);l(5,G=!1)}function k(){let f=!0;for(const p in r[0].tokens)r[0].tokens[p].redacted&&(f=!1);return f}function C(f,p){let A=[...f.matchAll(De)],c=y(A);r.push({headline:p,tokens:c})}function y(f){let p=[];for(const A in f){let c=f[A][1];if(c){let I=c.toLowerCase(),M={value:c,wordLower:I,redacted:!h&&I.length>2&&!i.hasOwnProperty(I)&&!n.hasOwnProperty(I),highlight:I==q};p.push(M)}f[A][3]&&p.push({value:f[A][3]})}return p}function b(f){l(4,q=f.word),_()}function W(){l(4,q=m.toLowerCase()),q=="togglecheats"&&l(1,h=!h);let f=new RegExp(`\\b${q}\\b`,"gi"),p=(t.match(f)||[]).length;l(0,n[q]=p,n),l(3,m=""),_()}function R(){m=this.value,l(3,m)}return[n,h,r,m,q,G,b,W,R]}class Be extends ve{constructor(e){super(),we(this,e,He,Ce,be,{},null,[-1,-1])}}export{Be as default};
