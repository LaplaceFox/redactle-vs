import{S as we,i as be,s as ke,e as N,t as W,c as P,a as C,h as B,d as A,b as I,K as Z,g as $,J as g,j as Y,n as oe,x as Ee,y as ye,z as Te,r as U,p as K,C as Se,L as ee,k as F,m as J,M as ie,N as Me,q as he,O as x,P as Ne,Q as Pe,o as ue}from"../chunks/index-3dc777aa.js";function Re(n){let e,l=(n[2]?"\u2580".repeat(n[0].length):n[0])+"",t,o;return{c(){e=N("span"),t=W(l),this.h()},l(a){e=P(a,"SPAN",{class:!0});var i=C(e);t=B(i,l),i.forEach(A),this.h()},h(){I(e,"class",o=Z(n[1]?"highlight":"")+" svelte-1h51goc")},m(a,i){$(a,e,i),g(e,t)},p(a,[i]){i&5&&l!==(l=(a[2]?"\u2580".repeat(a[0].length):a[0])+"")&&Y(t,l),i&2&&o!==(o=Z(a[1]?"highlight":"")+" svelte-1h51goc")&&I(e,"class",o)},i:oe,o:oe,d(a){a&&A(e)}}}function je(n,e,l){let{value:t=""}=e,{highlight:o=!1}=e,{redacted:a=!1}=e;return n.$$set=i=>{"value"in i&&l(0,t=i.value),"highlight"in i&&l(1,o=i.highlight),"redacted"in i&&l(2,a=i.redacted)},[t,o,a]}class Ae extends we{constructor(e){super(),be(this,e,je,Re,ke,{value:0,highlight:1,redacted:2})}}var Ce=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},Le={exports:{}};(function(n){(function(e){if(typeof l!="function"){var l=function(u){return u};l.nonNative=!0}const t=l("plaintext"),o=l("html"),a=l("comment"),i=/<(\w*)>/g,_=/<\/?([^\s\/>]+)/;function L(u,f,S){u=u||"",f=f||[],S=S||"";let q=O(f,S);return j(u,q)}function R(u,f){u=u||[],f=f||"";let S=O(u,f);return function(w){return j(w||"",S)}}L.init_streaming_mode=R;function O(u,f){return u=d(u),{allowable_tags:u,tag_replacement:f,state:t,tag_buffer:"",depth:0,in_quote_char:""}}function j(u,f){if(typeof u!="string")throw new TypeError("'html' parameter must be a string");let S=f.allowable_tags,q=f.tag_replacement,w=f.state,h=f.tag_buffer,p=f.depth,k=f.in_quote_char,y="";for(let G=0,E=u.length;G<E;G++){let T=u[G];if(w===t)switch(T){case"<":w=o,h+=T;break;default:y+=T;break}else if(w===o)switch(T){case"<":if(k)break;p++;break;case">":if(k)break;if(p){p--;break}k="",w=t,h+=">",S.has(b(h))?y+=h:y+=q,h="";break;case'"':case"'":T===k?k="":k=k||T,h+=T;break;case"-":h==="<!-"&&(w=a),h+=T;break;case" ":case`
`:if(h==="<"){w=t,y+="< ",h="";break}h+=T;break;default:h+=T;break}else if(w===a)switch(T){case">":h.slice(-2)=="--"&&(w=t),h="";break;default:h+=T;break}}return f.state=w,f.tag_buffer=h,f.depth=p,f.in_quote_char=k,y}function d(u){let f=new Set;if(typeof u=="string"){let S;for(;S=i.exec(u);)f.add(S[1])}else!l.nonNative&&typeof u[l.iterator]=="function"?f=new Set(u):typeof u.forEach=="function"&&u.forEach(f.add,f);return f}function b(u){let f=_.exec(u);return f?f[1].toLowerCase():null}n.exports?n.exports=L:e.striptags=L})(Ce)})(Le);var Ie=Le.exports;function fe(n,e,l){const t=n.slice();return t[16]=e[l],t[18]=l,t}function ce(n,e,l){const t=n.slice();return t[19]=e[l],t}function de(n,e,l){const t=n.slice();return t[19]=e[l],t}function ge(n){let e,l,t=Object.keys(n[0]).length+"",o,a;return{c(){e=N("p"),l=W("Solved in "),o=W(t),a=W(" guesses!")},l(i){e=P(i,"P",{});var _=C(e);l=B(_,"Solved in "),o=B(_,t),a=B(_," guesses!"),_.forEach(A)},m(i,_){$(i,e,_),g(e,l),g(e,o),g(e,a)},p(i,_){_&1&&t!==(t=Object.keys(i[0]).length+"")&&Y(o,t)},d(i){i&&A(e)}}}function _e(n){let e,l;return e=new Ae({props:{value:n[19].value,redacted:n[19].redacted,highlight:n[19].highlight||!1}}),{c(){Ee(e.$$.fragment)},l(t){ye(e.$$.fragment,t)},m(t,o){Te(e,t,o),l=!0},p(t,o){const a={};o&4&&(a.value=t[19].value),o&4&&(a.redacted=t[19].redacted),o&4&&(a.highlight=t[19].highlight||!1),e.$set(a)},i(t){l||(U(e.$$.fragment,t),l=!0)},o(t){K(e.$$.fragment,t),l=!1},d(t){Se(e,t)}}}function pe(n){let e,l;return e=new Ae({props:{value:n[19].value,redacted:n[19].redacted,highlight:n[19].highlight||!1}}),{c(){Ee(e.$$.fragment)},l(t){ye(e.$$.fragment,t)},m(t,o){Te(e,t,o),l=!0},p(t,o){const a={};o&8&&(a.value=t[19].value),o&8&&(a.redacted=t[19].redacted),o&8&&(a.highlight=t[19].highlight||!1),e.$set(a)},i(t){l||(U(e.$$.fragment,t),l=!0)},o(t){K(e.$$.fragment,t),l=!1},d(t){Se(e,t)}}}function ve(n){let e,l,t=n[16]+"",o,a,i=n[0][n[16]]+"",_,L,R,O,j;return{c(){e=N("span"),l=N("b"),o=W(t),a=W(" ("),_=W(i),L=W(")"),this.h()},l(d){e=P(d,"SPAN",{class:!0});var b=C(e);l=P(b,"B",{});var u=C(l);o=B(u,t),u.forEach(A),a=B(b," ("),_=B(b,i),L=B(b,")"),b.forEach(A),this.h()},h(){I(e,"class",R=Z(n[5]==n[16]?"highlight word":"word")+" svelte-18rwuu9")},m(d,b){$(d,e,b),g(e,l),g(l,o),g(e,a),g(e,_),g(e,L),O||(j=ee(e,"click",function(){Pe(n[6]({word:n[16]}))&&n[6]({word:n[16]}).apply(this,arguments)}),O=!0)},p(d,b){n=d,b&1&&t!==(t=n[16]+"")&&Y(o,t),b&1&&i!==(i=n[0][n[16]]+"")&&Y(_,i),b&33&&R!==(R=Z(n[5]==n[16]?"highlight word":"word")+" svelte-18rwuu9")&&I(e,"class",R)},d(d){d&&A(e),O=!1,j()}}}function qe(n){let e,l,t,o,a,i,_,L,R,O,j,d,b,u,f,S,q,w,h,p,k,y,G,E=n[1]&&ge(n),T=n[2],v=[];for(let r=0;r<T.length;r+=1)v[r]=_e(de(n,T,r));const Oe=r=>K(v[r],1,1,()=>{v[r]=null});let V=n[3],m=[];for(let r=0;r<V.length;r+=1)m[r]=pe(ce(n,V,r));const Ge=r=>K(m[r],1,1,()=>{m[r]=null});let X=Object.keys(n[0]).reverse(),M=[];for(let r=0;r<X.length;r+=1)M[r]=ve(fe(n,X,r));return{c(){e=N("div"),l=N("div"),t=N("h1"),o=W("Redactle"),a=F(),E&&E.c(),i=F(),_=N("article"),L=N("h2");for(let r=0;r<v.length;r+=1)v[r].c();R=F(),O=N("p");for(let r=0;r<m.length;r+=1)m[r].c();j=F(),d=N("guesses"),b=N("h3"),u=W("Guesses"),f=F(),S=N("div"),q=N("form"),w=N("input"),h=F(),p=N("guesses");for(let r=0;r<M.length;r+=1)M[r].c();this.h()},l(r){e=P(r,"DIV",{id:!0,class:!0});var c=C(e);l=P(c,"DIV",{id:!0,class:!0});var s=C(l);t=P(s,"H1",{});var D=C(t);o=B(D,"Redactle"),D.forEach(A),a=J(s),E&&E.l(s),i=J(s),_=P(s,"ARTICLE",{class:!0});var Q=C(_);L=P(Q,"H2",{class:!0});var te=C(L);for(let H=0;H<v.length;H+=1)v[H].l(te);te.forEach(A),R=J(Q),O=P(Q,"P",{class:!0});var le=C(O);for(let H=0;H<m.length;H+=1)m[H].l(le);le.forEach(A),Q.forEach(A),s.forEach(A),j=J(c),d=P(c,"GUESSES",{class:!0});var z=C(d);b=P(z,"H3",{});var se=C(b);u=B(se,"Guesses"),se.forEach(A),f=J(z),S=P(z,"DIV",{id:!0});var ne=C(S);q=P(ne,"FORM",{});var re=C(q);w=P(re,"INPUT",{placeholder:!0}),re.forEach(A),ne.forEach(A),h=J(z),p=P(z,"GUESSES",{class:!0});var ae=C(p);for(let H=0;H<M.length;H+=1)M[H].l(ae);ae.forEach(A),z.forEach(A),c.forEach(A),this.h()},h(){I(L,"class","svelte-18rwuu9"),I(O,"class","svelte-18rwuu9"),I(_,"class","svelte-18rwuu9"),I(l,"id","main"),I(l,"class","svelte-18rwuu9"),I(w,"placeholder","guess a word..."),I(S,"id","guess-form"),I(p,"class","svelte-18rwuu9"),I(d,"class","svelte-18rwuu9"),I(e,"id","redactle"),I(e,"class","svelte-18rwuu9")},m(r,c){$(r,e,c),g(e,l),g(l,t),g(t,o),g(l,a),E&&E.m(l,null),g(l,i),g(l,_),g(_,L);for(let s=0;s<v.length;s+=1)v[s].m(L,null);g(_,R),g(_,O);for(let s=0;s<m.length;s+=1)m[s].m(O,null);g(e,j),g(e,d),g(d,b),g(b,u),g(d,f),g(d,S),g(S,q),g(q,w),ie(w,n[4]),g(d,h),g(d,p);for(let s=0;s<M.length;s+=1)M[s].m(p,null);k=!0,y||(G=[ee(w,"input",n[8]),ee(q,"submit",Me(n[7]))],y=!0)},p(r,[c]){if(r[1]?E?E.p(r,c):(E=ge(r),E.c(),E.m(l,i)):E&&(E.d(1),E=null),c&4){T=r[2];let s;for(s=0;s<T.length;s+=1){const D=de(r,T,s);v[s]?(v[s].p(D,c),U(v[s],1)):(v[s]=_e(D),v[s].c(),U(v[s],1),v[s].m(L,null))}for(ue(),s=T.length;s<v.length;s+=1)Oe(s);he()}if(c&8){V=r[3];let s;for(s=0;s<V.length;s+=1){const D=ce(r,V,s);m[s]?(m[s].p(D,c),U(m[s],1)):(m[s]=pe(D),m[s].c(),U(m[s],1),m[s].m(O,null))}for(ue(),s=V.length;s<m.length;s+=1)Ge(s);he()}if(c&16&&w.value!==r[4]&&ie(w,r[4]),c&97){X=Object.keys(r[0]).reverse();let s;for(s=0;s<X.length;s+=1){const D=fe(r,X,s);M[s]?M[s].p(D,c):(M[s]=ve(D),M[s].c(),M[s].m(p,null))}for(;s<M.length;s+=1)M[s].d(1);M.length=X.length}},i(r){if(!k){for(let c=0;c<T.length;c+=1)U(v[c]);for(let c=0;c<V.length;c+=1)U(m[c]);k=!0}},o(r){v=v.filter(Boolean);for(let c=0;c<v.length;c+=1)K(v[c]);m=m.filter(Boolean);for(let c=0;c<m.length;c+=1)K(m[c]);k=!1},d(r){r&&A(e),E&&E.d(),x(v,r),x(m,r),x(M,r),y=!1,Ne(G)}}}let me=/(([^\u0000-\u007F]|\w)+)((\W)*)/ig;function De(n,e,l){let t="",o="",a={},i=!1;const _=["i","me","my","myself","we","our","ours","ourselves","you","you're","you've","you'll","you'd","your","yours","yourself","yourselves","he","him","his","himself","she","she's","her","hers","herself","it","it's","its","itself","they","them","their","theirs","themselves","what","which","who","whom","this","that","that'll","these","those","am","is","are","was","were","be","been","being","have","has","had","having","do","does","did","doing","a","an","the","and","but","if","or","because","as","until","while","of","at","by","for","with","about","against","between","into","through","during","before","after","above","below","to","from","up","down","in","out","on","off","over","under","again","further","then","once","here","there","when","where","why","how","all","any","both","each","few","more","most","other","some","such","no","nor","not","only","own","same","so","than","too","very","s","t","can","will","just","don","don't","should","should've","now","d","ll","m","o","re","ve","y","ain","aren","aren't","couldn","couldn't","didn","didn't","doesn","doesn't","hadn","hadn't","hasn","hasn't","haven","haven't","isn","isn't","ma","mightn","mightn't","mustn","mustn't","needn","needn't","shan","shan't","shouldn","shouldn't","wasn","wasn't","weren","weren't","won","won't","wouldn","wouldn't"];let L={};_.filter(h=>h.length<8).forEach(h=>L[h]=1);let R=[],O=[],j="",d="";function b(){const h=["Australia_(continent)","Atlas","Surveying","Empire_of_Japan","Architecture","Ice_Skating","Eiffel_Tower","Galaxy","Kilogram","Carbon"],p=Math.floor(Math.random()*h.length);let k=h[p];fetch(`https://en.wikipedia.org/api/rest_v1/page/mobile-sections/${k}`).then(y=>y.json()).then(y=>{t=y.lead.displaytitle;let G=y.lead.sections[0].text;G=G.replace(/<style.*>.*<\/style>/ig,""),o=Ie(G).replace(/&nbsp;/g," ").replace(/&(?:amp);/g,"&").replace(/&(?:lt);/g,"<").replace(/&(?:gt);/g,">").replace(/&(?:quot);/g,'"').replace(/&(?:#39);/g,"'"),o=o.replace(/\[\d+\]/ig,""),u()})}b();function u(){console.log("rendering...");let h=[...t.matchAll(me)];l(2,R=f(h));let p=!0;for(const y in R)R[y].redacted&&(p=!1);l(1,i=p);let k=[...o.matchAll(me)];l(3,O=f(k))}function f(h){let p=[];for(const k in h){let y=h[k][1];if(y){let G=y.toLowerCase(),E={value:y,wordLower:G,redacted:!i&&G.length>2&&!L.hasOwnProperty(G)&&!a.hasOwnProperty(G),highlight:G==d};p.push(E)}h[k][3]&&p.push({value:h[k][3]})}return p}function S(h){console.log(h),l(5,d=h.word),u()}function q(){l(5,d=j.toLowerCase()),d=="togglecheats"&&l(1,i=!i);let h=new RegExp(`\\b${d}\\b`,"gi"),p=(o.match(h)||[]).length;l(0,a[d]=p,a),l(4,j=""),u()}function w(){j=this.value,l(4,j)}return[a,i,R,O,j,d,S,q,w]}class We extends we{constructor(e){super(),be(this,e,De,qe,ke,{})}}export{We as default};
